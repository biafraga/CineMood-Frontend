<div class="filmes-container">
  <header class="filmes-header">
    <div>
      <h1>Filmes</h1>
      <p>Gerencie o catálogo de filmes</p>
    </div>

    <button class="btn-add" (click)="abrirModalAdicionar()">
      <i class="bi bi-plus-lg"></i>
      Adicionar Filmes
    </button>
  </header>

  <div class="search-bar">
    <i class="bi bi-search"></i>
    <input
      type="text"
      placeholder="Buscar filmes..."
      [formControl]="searchControl"
    />
  </div>

  <!-- tabela -->
  <div class="filmes-table">
    <div class="table-header">
      <div class="col-titulo">Título</div>
      <div class="col-mood">Mood</div>
      <div class="col-diretor">Diretor</div>
      <div class="col-ano">Ano</div>
      <div class="col-acoes">Ações</div>
    </div>

    @for (filme of filmes(); track filme.id) {
      <div class="table-row">
        <div class="col-titulo">{{ filme.titulo }}</div>

        <div class="col-mood">
          <span class="tag-mood" [ngClass]="classeMood(filme.moods?.[0])">
            {{ filme.moods?.join(', ') || 'sem mood' }}
          </span>
        </div>

        <div class="col-diretor">
          {{ filme.diretor || '-' }}
        </div>

        <div class="col-ano">{{ filme.anoLancamento }}</div>

        <div class="col-acoes">
          <button class="btn-icon" (click)="abrirModalEditar(filme)">
            <i class="bi bi-pencil-fill"></i>
          </button>

          <button class="btn-icon btn-delete" (click)="deletarFilme(filme.id)">
            <i class="bi bi-trash-fill"></i>
          </button>
        </div>
      </div>
    } @empty {
      <div class="table-row">
        <p class="text-muted p-3">
          Nenhum filme cadastrado ainda.
        </p>
      </div>
    }
  </div>

  <p class="mt-3 text-muted">
    Total de filmes: {{ totalFilmes() }}
  </p>
</div>
