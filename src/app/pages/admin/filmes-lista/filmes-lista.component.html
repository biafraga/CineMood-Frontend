<div class="filmes-container">
  <header class="filmes-header">
    <div>
      <h1>Filmes</h1>
      <p>Gerencie o catálogo de filmes</p>
    </div>

    <button class="btn-add" type="button" (click)="abrirModalAdicionar()">
      <i class="bi bi-plus-lg"></i> Adicionar Filmes
    </button>
  </header>

  <div class="content-card">
    <div class="search-bar">
      <i class="bi bi-search"></i>
      <input type="text" placeholder="Buscar filmes..." [formControl]="searchControl" />
    </div>

    <div class="filmes-table">
      <div class="table-header">
        <div class="col-titulo">Título</div>
        <div class="col-ano">Ano</div>
        <div class="col-acoes">Ações</div>
      </div>

      @for (filme of filmes(); track filme.id) {
        <div class="table-row">
          <div class="col-titulo">{{ filme.titulo }}</div>
          <div class="col-ano">{{ filme.anoLancamento }}</div>
          <div class="col-acoes">
            <button class="btn-icon" type="button" (click)="abrirModalEditar(filme)">
              <i class="bi bi-pencil-fill"></i>
            </button>
            <button class="btn-icon btn-delete" type="button" (click)="deletar(filme.id)">
              <i class="bi bi-trash-fill"></i>
            </button>
          </div>
        </div>
      } @empty {
        <div class="table-row">
          <p class="text-muted p-3">nenhum filme cadastrado ainda.</p>
        </div>
      }
    </div>
  </div>

  <!-- modal inline -->
  <app-filmes-modal
    *ngIf="modalAberto()"
    [filmeParaEditar]="filmeEmEdicao()"
    (closed)="onModalClosed($event)">
  </app-filmes-modal>
</div>
